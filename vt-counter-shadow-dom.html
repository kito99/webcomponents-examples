<!DOCTYPE html>
<html>
<head>

</head>
<template>
    <style>
        .counter {
            color: indigo;
            font-size: 60pt;
            font-family: sans-serif;
            text-align: center;
            padding: 10px;
            border: 1px black inset;
        }

        .counter-disabled {
            color: gray;
        }
    </style>

    <span id="value" class="counter counter-disabled">Counter</span>
</template>

<script src="vt-counter.js"></script>

<script type="application/javascript">
    customElements.whenDefined('vt-counter').then( function() {
		class VirtuaTrainingShadowDomCounter extends VirtuaTrainingCounter {

			/**
			 * @override
			 */
			constructor() {
				super();

				console.log('inside overridden constructor');
				const template = document.querySelector('template');
				const templateContent = template.content.cloneNode(true);
				this._content = templateContent.getElementById('value');
				this.attachShadow({mode: 'open'});
				this.shadowRoot.appendChild(templateContent);

				this._onClick = this._onClick.bind(this);
			}

			/**
			 * Fires when an instance was inserted into the document.
			 * @override
			 */
			connectedCallback() {
				console.log('inside overridden connectedCallback');
				this._upgradeProperty('first');
				this.value = this.first || 0;
			}
		}


		// Registers <vt-shadow-dom-counter> as a custom element
		window.customElements.define('vt-shadow-dom-counter', VirtuaTrainingShadowDomCounter);
	});
</script>
</html>